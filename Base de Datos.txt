CREATE TABLE pyme
(id NUMBER NOT NULL,
nombres VARCHAR2(30) NOT NULL,
apellidos VARCHAR2(30) NOT NULL,
rut VARCHAR2(20) NOT NULL,
nombre_pyme VARCHAR2(20) NOT NULL,
correo VARCHAR2(40) NOT NULL,
contraseña VARCHAR2(20) NOT NULL,
telefono VARCHAR2(20) NOT NULL,
id_categoria_pyme NUMBER NOT NULL,
id_direccion NUMBER NOT NULL,
id_estado NUMBER NOT NULL,
CONSTRAINT pyme_pk
    PRIMARY KEY (id));

CREATE TABLE direccion
(id NUMBER NOT NULL,
descripcion  VARCHAR2(20) NOT NULL,
id_comuna NUMBER NOT NULL,
CONSTRAINT direccion_pk
    PRIMARY KEY (id));
    
CREATE TABLE comuna
(id NUMBER NOT NUlL,
descripcion VARCHAR2(20) NOT NULL,
id_ciudad NUMBER NOT NULL,
CONSTRAINT comuna_pk
    PRIMARY KEY (id));
    
CREATE TABLE ciudad
(id NUMBER NOT NULL,
descripcion VARCHAR2(20) NOT NULL,
id_region NUMBER NOT NULL,
CONSTRAINT ciudad_pk
    PRIMARY KEY (ID));
    
CREATE TABLE region
(id NUMBER NOT NULL,
descripcion VARCHAR2(20) NOT NULL,
CONSTRAINT region_pk
    PRIMARY KEY (id));

CREATE TABLE categoria_pyme 
(id NUMBER NOT NULL,
descripcion VARCHAR2(20) NOT NULL,
CONSTRAINT categoria_pyme_pk
    PRIMARY KEY (id));
    
CREATE TABLE estado
(id NUMBER NOT NULL,
descripcion VARCHAR2(20) NOT NULL,
CONSTRAINT estado_pk
    PRIMARY KEY (id));

CREATE TABLE validacion
(id NUMBER NOT NULL,
id_pyme NUMBER NOT NULL,
archivo VARCHAR2(30) NOT NULL,
CONSTRAINT validacion_pk
    PRIMARY KEY (id));
    
CREATE TABLE cliente
(rut VARCHAR2(20) NOT NULL,
nombres VARCHAR2(20) NOT NULL,
apelidos VARCHAR2(20) NOT NULL,
telefono VARCHAR2(20) NOT NULL,
correo VARCHAR2(30) NOT NULL,
contraseña VARCHAR2(20) NOT NULL,
id_direccion NUMBER NOT NULL,
CONSTRAINT cliente_pk
    PRIMARY KEY (rut));
    
CREATE TABLE productos
(id NUMBER NOT NULL,
titulo VARCHAR2(20) NOT NULL,
descripcion VARCHAR2(250) NOT NULL,
foto VARCHAR2(20) NOT NULL,
precio NUMBER NOT NULL,
stock NUMBER NOT NULL,
id_pyme NUMBER NOT NULL,
id_categoria_producto NUMBER NOT NULL,
CONSTRAINT productos_pk
    PRIMARY KEY (id));

CREATE TABLE categoria_producto
(id NUMBER NOT NULL,
descripcion VARCHAR2(20) NOT NULL,
CONSTRAINT categoria_producto_pk
	PRIMARY KEY (id));

CREATE TABLE pedidos
(boleta NUMBER NOT NULL,
rut_cliente VARCHAR2(20) NOT NULL,
id_pyme NUMBER NOT NULL,
id_producto NUMBER NOT NULL,
cantidad NUMBER NOT NULL,
fecha VARCHAR2(20) NOT NULL,
total NUMBER NOT NULL,
id_estado_pedido NUMBER NOT NULL,
CONSTRAINT pedidos_pk
    PRIMARY KEY (boleta));
    
CREATE TABLE estado_pedido
(id NUMBER NOT NULL,
descripcion VARCHAR2(30) NOT NULL,
CONSTRAINT estado_pedido_pk
    PRIMARY KEY (id));

ALTER TABLE pyme
ADD CONSTRAINT pyme_fk_categoria_pyme
FOREIGN KEY (id_categoria_pyme)
REFERENCES categoria_pyme (id);

ALTER TABLE pyme
ADD CONSTRAINT pyme_fk_direccion
FOREIGN KEY (id_direccion)
REFERENCES direccion (id);

ALTER TABLE pyme
ADD CONSTRAINT pyme_fk_estado
FOREIGN KEY (id_estado)
REFERENCES estado (id);

ALTER TABLE cliente
ADD CONSTRAINT cliente_fk_direccion
FOREIGN KEY (id_direccion)
REFERENCES direccion (id);

ALTER TABLE validacion
ADD CONSTRAINT validacion_fk_pyme
FOREIGN KEY (id_pyme)
REFERENCES pyme (id);

ALTER TABLE productos
ADD CONSTRAINT productos_fk_pyme
FOREIGN KEY (id_pyme)
REFERENCES pyme (id);

ALTER TABLE productos
ADD CONSTRAINT productos_fk_categoria_producto
FOREIGN KEY (id_categoria_producto)
REFERENCES categoria_producto(id);

ALTER TABLE pedidos
ADD CONSTRAINT pedidos_fk_pyme
FOREIGN KEY (id_pyme)
REFERENCES pyme (id);

ALTER TABLE pedidos
ADD CONSTRAINT pedidos_fk_cliente
FOREIGN KEY (rut_cliente)
REFERENCES cliente (rut);

ALTER TABLE pedidos
ADD CONSTRAINT pedidos_fk_estado_pedido
FOREIGN KEY (id_estado_pedido)
REFERENCES estado_pedido (id);

ALTER TABLE direccion
ADD CONSTRAINT direccion_fk_comuna
FOREIGN KEY (id_comuna)
REFERENCES comuna(id);

ALTER TABLE comuna
ADD CONSTRAINT comuna_fk_ciudad
FOREIGN KEY (id_ciudad)
REFERENCES ciudad(id);

ALTER TABLE ciudad
ADD CONSTRAINT ciudad_fk_region
FOREIGN KEY (id_region)
REFERENCES region(id);

ALTER TABLE pedidos
ADD CONSTRAINT pedidos_fk_productos
FOREIGN KEY (id_producto)
REFERENCES productos(id);
